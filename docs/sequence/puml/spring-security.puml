@startuml
autonumber
actor Client
participant HttpSecurity
participant SecurityFilterChain
participant AuthenticationManager

== Security Setup ==
Client -> HttpSecurity : incoming HTTP request
activate HttpSecurity
HttpSecurity -> SecurityFilterChain : match URL patterns
SecurityFilterChain --> HttpSecurity : permitAll or authenticate

alt /h2-console or /api/user/sign-up or /api/user/login
    HttpSecurity --> Client : request allowed (no authentication)
else other endpoints
    HttpSecurity -> AuthenticationManager : authenticate JWT
    AuthenticationManager --> HttpSecurity : auth result
    HttpSecurity --> Client : 200 OK or 403/401
end
deactivate HttpSecurity
@enduml
